# Тестовое задание PHP 4people

## Минимальные требования

---
- php8.1
- node 14.4.0
- composer 2


## Установка

---
- `composer install`
- `npm install`
- Из файла `.env.exapmle` из `.env` с минимально-необходимым набором настроек (необходима БД)
- `php artisan migrate`
- `php artisan serve`
- `npm run build`, либо `npm run dev`
- Открыть в брузере `http://127.0.0.1:8000`

## Общая информация

---
### Бизнес логика
Бизнес логика парсинга новостного сайта заключена в сервисе `App\Services\HtmlParser\HtmlParser`. Настройки 
селекторов информационных блоков 
страницы со списком новостей и страницы самой новости осуществлются в классе `App\Services\NewsResources\Rbc`, 
который реализует интерфейс `App\Services\NewsResources\Contracts\NewsResourceInterface` (геттеры и сеттеры 
реализованы в трейте `App\Services\NewsResources\Traits\NewsResourceable`). Соответственно для добавления нового 
новостного ресурса необходимо создать класс реализующий вышеописанный интерфейс и указать в нем свойства с 
соответствующими селекторами.

### Парсинг новостей

Парсинг новостей реализован в Job'е `App\Jobs\FetchNewsJob`. По умолчанию в `.env` файле установлено синхронное 
выполнение Job'ов.

## UI

---
По адресу `http://127.0.0.1:8000/news_items` доступен список новостей. Отдельные страницы новостей доступны по 
адресу `http://127.0.0.1:8000/news_items/{:id}`, где `id` ID новости.


## API

---
### GET `/api/news_items`

Возвращает список новостей в json

#### Пример

GET `http://127.0.0.1:8000/api/news_items`

---

### PUT `/api/news_items/{:id}`

Обновление рейтинга новости

#### Параметры

`rating` - рейтинг (целое число)

#### Пример

PUT `http://127.0.0.1:8000/api/news_items/1?rating=5`

#### Ответ `201`

---
### GET `/api/news_items/fetch`

Поставить задачу на загрузку новых новостей

#### Пример

GET `http://127.0.0.1:8000/api/news_items/fetch`


